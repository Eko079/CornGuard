<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prediksi Penyakit Daun Jagung</title>
  <link rel="stylesheet" href="css/predict.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <span class="seed"></span>
        CornGuard
      </div>
      <nav class="nav-links">
        <a href="index.html">Beranda</a>
        <a href="#prediksi">Prediksi</a>
      </nav>
    </div>
  </header>

  <main class="page">
    <a class="back-link" href="index.html">
      <svg viewBox="0 0 20 20" aria-hidden="true">
        <path d="M12.7 4.7a1 1 0 0 1 0 1.4L9.41 9.4H16a1 1 0 1 1 0 2h-6.59l3.3 3.3a1 1 0 0 1-1.42 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.42 0Z" />
      </svg>
      Kembali ke Beranda
    </a>

    <div class="hero">
      <div class="intro">
        <div class="eyebrow">Laboratorium Lapangan</div>
        <h1>Pendeteksi Penyakit Jagung via Foto Daun</h1>
        <p>Unggah foto daun jagung, pilih area yang ingin diuji, lalu model CNNâ€‘DenseNet121 kami akan memprediksi penyakit secara otomatis.</p>
        <div class="chips">
          <span class="chip">Model CNN-DenseNet121</span>
          <span class="chip green">Crop manual & otomatis</span>
        </div>
        <div id="model-info" class="meta"></div>
      </div>
      <div class="hero-visual panel">
        <div class="panel-badge">Mode uji lapangan</div>
        <div class="leaf"></div>
        <div class="leaf"></div>
        <div class="leaf"></div>
        <p class="note">Tip: pilih area daun yang paling jelas (drag di kanvas). Sistem tetap akan resize ke 256x256.</p>
      </div>
    </div>

    <section class="panel" id="prediksi">
      <div class="upload-box">
        <div class="preview" id="preview">
          <canvas id="canvas" width="500" height="500"></canvas>
        </div>
        <div class="actions">
          <input type="file" id="file" accept="image/*" hidden />
          <button class="btn secondary" id="pick">Pilih Gambar</button>
          <button class="btn secondary" id="reset-crop">Reset Area Crop</button>
          <small class="note">Pilih area gambar sendiri (drag di kanvas). Jika tidak memilih, dikirim seluruh gambar dan akan di-resize otomatis.</small>
          <div class="warning">Pastikan Anda mengunggah foto daun jagun. Dan pastikan gambar jelas dan fokus.</div>
          <button class="btn primary" id="submit">Kirim & Prediksi</button>
          <div class="status-row">
            <div class="loader" id="loader" hidden></div>
            <div class="status" id="status"></div>
          </div>
        </div>
      </div>

      <div class="result" id="result" style="display:none;">
        <div class="pill" id="top-label"></div>
        <table class="table" id="prob-table">
          <thead><tr><th>Kelas</th><th>Probabilitas</th></tr></thead>
          <tbody></tbody>
        </table>
        <div class="status" id="save-info"></div>
      </div>
    </section>
  </main>

  <script src="js/predict.js"></script>
</body>
</html>
